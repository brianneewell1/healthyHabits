(this["webpackJsonphealthy-habits"]=this["webpackJsonphealthy-habits"]||[]).push([[0],{84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(20),s=n.n(r),i=n(9),j=n(3),o=n(12),l=n(8),u=n(18),b=n.n(u);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};localStorage.setItem("authentication",JSON.stringify(e)),d(e.token)}function d(e){b.a.defaults.headers.common={Authorization:"Bearer ".concat(e)}}var O={login:function(e,t){return b.a.post("api/auth/login",{username:e,password:t}).then((function(e){return h(e.data.token),e.data.token}))},logout:function(){localStorage.removeItem("authentication")},register:function(e,t){return b.a.post("api/auth/register",{username:e,password:t}).then((function(e){return h({token:e.data.token}),e.data.token}))},getAuth:function(){var e=JSON.parse(localStorage.getItem("authentication"));return e?(d(e.token),e):null},setAuth:h},f=n(1),m=Object(c.createContext)(null);function x(){var e=Object(c.useContext)(m);if(void 0===e)throw new Error("useAuth must be used within a AuthProvider");return e}var p=n(11);function v(e){var t=e.component,n=Object(p.a)(e,["component"]),c=x().auth;return Object(f.jsx)(l.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return c?Object(f.jsx)(t,Object(j.a)({},e)):Object(f.jsx)(l.a,{to:"/login"})}}))}var g=n(22),N=n(5),k=n.n(N);function w(e){var t=e.children,n=e.className,c=Object(p.a)(e,["children","className"]),a=k()("container",n);return Object(f.jsx)("div",Object(j.a)(Object(j.a)({className:a},c),{},{children:t}))}function y(e){var t=e.children,n=e.className,c=Object(p.a)(e,["children","className"]),a=k()("form-group mb-3",n);return Object(f.jsx)("div",Object(j.a)(Object(j.a)({className:a},c),{},{children:t}))}function C(e){var t=e.children,n=e.className,c=Object(p.a)(e,["children","className"]),a=k()("btn",n);return Object(f.jsx)("button",Object(j.a)(Object(j.a)({className:a},c),{},{children:t}))}function S(e){var t=e.children,n=e.className,c=Object(p.a)(e,["children","className"]),a=k()("col",n);return Object(f.jsx)("div",Object(j.a)(Object(j.a)({className:a},c),{},{children:t}))}function A(e){var t=e.innerRef,n=e.className,c=Object(p.a)(e,["innerRef","className"]),a=k()("form-control bg-light",n);return Object(f.jsx)("input",Object(j.a)({ref:t,className:a},c))}function R(e){var t=e.for,n=e.children,c=e.className,a=Object(p.a)(e,["for","children","className"]),r=k()("mb-2",c);return Object(f.jsx)("label",Object(j.a)(Object(j.a)({htmlFor:t,className:r},a),{},{children:n}))}function E(e){var t=e.children,n=e.className,c=Object(p.a)(e,["children","className"]),a=k()("row",n);return Object(f.jsx)("div",Object(j.a)(Object(j.a)({className:a},c),{},{children:t}))}function I(){var e=Object(c.useState)({username:"",password:""}),t=Object(o.a)(e,2),n=t[0],a=t[1],r=x(),s=r.auth,i=r.setAuth,u=Object(l.g)();function b(e){var t=e.target,c=t.name,r=t.value;a(Object(j.a)(Object(j.a)({},n),{},Object(g.a)({},c,r)))}return Object(c.useEffect)((function(){s&&u.push("/profile")}),[]),Object(f.jsx)(w,{className:"mt-5",children:Object(f.jsx)(E,{children:Object(f.jsxs)(S,{className:"col-md-6 offset-md-3",children:[Object(f.jsx)("h1",{className:"mb-4",children:"Login"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.username,c=n.password;O.login(t,c).then((function(e){i(Object(j.a)(Object(j.a)({},s),{},{token:e})),setTimeout((function(){u.push("/profile")}))})).catch((function(e){}))},children:[Object(f.jsxs)(y,{children:[Object(f.jsx)(R,{children:"Email"}),Object(f.jsx)(A,{type:"text",name:"username",value:n.username,onChange:b})]}),Object(f.jsxs)(y,{children:[Object(f.jsx)(R,{children:"Password"}),Object(f.jsx)(A,{type:"password",name:"password",value:n.password,onChange:b})]}),Object(f.jsx)(y,{className:"text-right",children:Object(f.jsx)(C,{className:"btn-primary",children:"Submit"})})]})]})})})}function P(){var e=Object(c.useState)({username:"",password:""}),t=Object(o.a)(e,2),n=t[0],a=t[1],r=x(),s=r.auth,i=r.setAuth,u=Object(l.g)();function b(e){var t=e.target,c=t.name,r=t.value;a(Object(j.a)(Object(j.a)({},n),{},Object(g.a)({},c,r)))}return Object(c.useEffect)((function(){s&&u.push("/profile")}),[]),Object(f.jsx)(w,{className:"mt-5",children:Object(f.jsx)(E,{children:Object(f.jsxs)(S,{className:"col-md-6 offset-md-3",children:[Object(f.jsx)("h1",{className:"mb-4",children:"Register"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.username,c=n.password;O.register(t,c).then((function(e){i(Object(j.a)(Object(j.a)({},s),{},{token:e})),setTimeout((function(){u.push("/profile")}))})).catch((function(e){}))},children:[Object(f.jsxs)(y,{children:[Object(f.jsx)(R,{children:"Email"}),Object(f.jsx)(A,{type:"text",name:"username",value:n.username,onChange:b})]}),Object(f.jsxs)(y,{children:[Object(f.jsx)(R,{children:"Password"}),Object(f.jsx)(A,{type:"password",name:"password",value:n.password,onChange:b})]}),Object(f.jsx)(y,{className:"text-right",children:Object(f.jsx)(C,{className:"btn-primary",children:"Register"})})]})]})})})}var G={getProfile:function(){return b.a.get("/api/users/profile")}};function z(){var e=Object(c.useState)({user:null}),t=Object(o.a)(e,2),n=t[0],a=t[1],r=x(),s=r.auth,i=r.setAuth;return Object(c.useEffect)((function(){(null===s||void 0===s?void 0:s.user)?a(Object(j.a)(Object(j.a)({},n),{},{user:s.user})):G.getProfile().then((function(e){e.data._id&&(a(Object(j.a)(Object(j.a)({},n),{},{user:e.data})),i(Object(j.a)(Object(j.a)({},s),{},{user:e.data})),O.setAuth(Object(j.a)(Object(j.a)({},s),{},{user:e.data})))})).catch((function(e){}))}),[]),Object(f.jsx)(w,{className:"mt-5",children:Object(f.jsx)(E,{children:Object(f.jsxs)(S,{children:[Object(f.jsx)("h1",{children:"Profile"}),n.user&&Object(f.jsxs)("p",{children:["Welcome ",n.user.username]})]})})})}function L(e){var t=e.fluid,n=e.children;return Object(f.jsx)("div",{className:"container".concat(t?"-fluid":""),children:n})}function B(e){var t=e.fluid,n=e.children;return Object(f.jsx)("div",{className:"row".concat(t?"-fluid":""),children:n})}function D(e){var t=e.size,n=e.children;return Object(f.jsx)("div",{className:t.split(" ").map((function(e){return"col-"+e})).join(" "),children:n})}var F=function(e){var t=e.children;return Object(f.jsx)("div",{style:{height:150,clear:"both",paddingTop:50,textAlign:"center"},className:"jumbotron",children:t})};var J=function(){return Object(f.jsx)(L,{fluid:!0,children:Object(f.jsx)(B,{children:Object(f.jsx)(D,{size:"md-12",children:Object(f.jsx)(F,{children:Object(f.jsx)("h1",{children:"Goal Doesn't Exist...yet"})})})})})};n(84);var T=function(e){return Object(f.jsx)("span",Object(j.a)(Object(j.a)({className:"delete-btn"},e),{},{role:"button",tabIndex:"0",children:"\u2717"}))},_=function(){return b.a.get("/api/goals")},M=function(e){return b.a.get("/api/goals/"+e)},H=function(e){return b.a.delete("/api/goals/"+e)},W=function(e){return console.log(e),b.a.post("/api/goals",e)};n(85);function K(e){var t=e.children;return Object(f.jsx)("div",{className:"list-overflow-container",children:Object(f.jsx)("ul",{className:"list-group",children:t})})}function U(e){var t=e.children;return Object(f.jsx)("li",{className:"list-group-item",children:t})}function V(e){return Object(f.jsx)("div",{className:"form-group",children:Object(f.jsx)("input",Object(j.a)({className:"form-control"},e))})}function q(e){return Object(f.jsx)("div",{className:"form-group",children:Object(f.jsx)("textarea",Object(j.a)({className:"form-control",rows:"20"},e))})}function Q(e){return Object(f.jsx)("button",Object(j.a)(Object(j.a)({},e),{},{style:{float:"center",marginBottom:10},className:"btn btn-success",children:e.children}))}var X=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)({}),s=Object(o.a)(r,2),l=s[0],u=s[1];function b(){_().then((function(e){return a(e.data)})).catch((function(e){return console.log(e)}))}function h(e){var t=e.target,n=t.name,c=t.value;u(Object(j.a)(Object(j.a)({},l),{},Object(g.a)({},n,c)))}return Object(c.useEffect)((function(){b()}),[]),Object(f.jsx)(L,{fluid:!0,children:Object(f.jsxs)(B,{children:[Object(f.jsxs)(D,{size:"md-6",children:[Object(f.jsx)(F,{children:Object(f.jsx)("h1",{children:"Set New Goal"})}),Object(f.jsxs)("form",{children:[Object(f.jsx)(V,{onChange:h,name:"title",placeholder:"Run 1 mile"}),Object(f.jsx)(V,{onChange:h,name:"measurement",placeholder:"3 times a week"}),Object(f.jsx)(V,{onChange:h,name:"duration",placeholder:"For a Month"}),Object(f.jsx)(q,{onChange:h,name:"notes",placeholder:"I plan on running MWF at 7:00am (Optional)"}),Object(f.jsx)(Q,{onClick:function(e){e.preventDefault(),l.title&&W({title:l.title,measurement:l.measurement,duration:l.duration,notes:l.notes}).then((function(e){return b()})).catch((function(e){return console.log(e)}))},children:"Add Goal"})]})]}),Object(f.jsxs)(D,{size:"md-6 sm-12",children:[Object(f.jsx)(F,{children:Object(f.jsx)("h1",{children:"My Goals"})}),n.length?(console.log(n),Object(f.jsx)(K,{children:n.map((function(e){return Object(f.jsxs)(U,{children:[Object(f.jsx)(i.b,{to:"/goals/"+e._id,children:Object(f.jsxs)("strong",{children:[e.title," for ",e.measurement," for ",e.duration]})}),Object(f.jsx)(T,{onClick:function(){return t=e._id,void H(t).then((function(e){return b()})).catch((function(e){return console.log(e)}));var t}})]},e._id)}))})):Object(f.jsx)("h3",{children:"No Current Goals"})]})]})})},Y=n(35),Z=n(36),$=n(40),ee=n(39),te=function(e){Object($.a)(n,e);var t=Object(ee.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(Z.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Check-in Page"})})}}]),n}(c.Component),ne=function(e){Object($.a)(n,e);var t=Object(ee.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(Z.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Progress Page"})})}}]),n}(c.Component);var ce=function(e){var t=Object(c.useState)({}),n=Object(o.a)(t,2),r=n[0],s=n[1],j=Object(l.h)().id;Object(c.useEffect)((function(){M(j).then((function(e){return s(e.data)})).catch((function(e){return console.log(e)}))}),[]);var u=a.a.useRef(null),b=a.a.useRef(null);return Object(f.jsxs)(L,{fluid:!0,children:[Object(f.jsx)(F,{children:Object(f.jsx)("h1",{children:r.title})}),Object(f.jsxs)(B,{children:[Object(f.jsxs)(D,{size:"md-6",children:[Object(f.jsxs)("article",{children:[Object(f.jsx)("h1",{children:"Notes"}),Object(f.jsx)("p",{children:r.notes})]}),Object(f.jsx)(B,{children:Object(f.jsx)(i.b,{to:"/",children:"\u2190 Back to All Goals"})})]}),Object(f.jsx)(D,{size:"md-6 sm-12",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"file",accept:"image/*",multiple:"false",onChange:function(e){var t=Object(o.a)(e.target.files,1)[0];if(t){var n=new FileReader,c=b.current;c.file=t,n.onload=function(e){c.src=e.target.result},n.readAsDataURL(t)}},ref:u,style:{display:"none"}}),Object(f.jsx)("div",{style:{height:"120px",width:"120px",border:"1px dashed black"},onClick:function(){return u.current.click()},children:Object(f.jsx)("img",{ref:b,style:{height:"120px",width:"120px",position:"absolute"}})}),"Click to upload Image"]})})]})]})},ae=function(){return Object(f.jsxs)(l.d,{children:[Object(f.jsx)(l.b,{path:"/profile",component:z}),Object(f.jsx)(l.b,{path:"/goals",component:X}),Object(f.jsx)(l.b,{path:"/checkin",component:te}),Object(f.jsx)(l.b,{path:"/progress",component:ne}),Object(f.jsx)(l.b,{path:"/goals/:id",component:ce})]})},re=(n(86),n(33)),se=n(29),ie=n(32);var je=function(){return Object(f.jsxs)(re.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(f.jsx)(re.a.Brand,{href:"/profile",children:"Healthy Habits"}),Object(f.jsx)(re.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(f.jsxs)(re.a.Collapse,{id:"responsive-navbar-nav",children:[Object(f.jsxs)(se.a,{className:"mr-auto",children:[Object(f.jsx)(se.a.Link,{href:"/profile",children:"Profile"}),Object(f.jsxs)(ie.a,{title:"Goals",id:"collasible-nav-dropdown",children:[Object(f.jsx)(ie.a.Item,{href:"/goals",children:"Create/View Goals"}),Object(f.jsx)(ie.a.Item,{href:"/checkin",children:"Check-In"}),Object(f.jsx)(ie.a.Item,{href:"/progress",children:"Progress"})]})]}),Object(f.jsxs)(se.a,{children:[Object(f.jsx)(se.a.Link,{href:"#deets",children:"Login"}),Object(f.jsx)(se.a.Link,{eventKey:2,href:"#memes",children:"Logout"})]})]})]})};var oe=function(){var e=Object(c.useState)({isReady:!1}),t=Object(o.a)(e,2),n=t[0],a=t[1],r=x(),s=r.auth,u=r.setAuth;return Object(c.useEffect)((function(){var e=O.getAuth();e&&u(Object(j.a)(Object(j.a)({},s),e)),a(Object(j.a)(Object(j.a)({},n),{},{isReady:!0}))}),[]),n.isReady?Object(f.jsx)(i.a,{children:Object(f.jsxs)("div",{children:[Object(f.jsx)(je,{}),Object(f.jsxs)(l.d,{children:[Object(f.jsx)(l.b,{exact:!0,path:"/",component:ae}),Object(f.jsx)(l.b,{exact:!0,path:"/login",component:I}),Object(f.jsx)(l.b,{exact:!0,path:"/register",component:P}),Object(f.jsx)(v,{exact:!0,path:"/profile",component:z}),Object(f.jsx)(l.b,{component:J})]})]})}):null};s.a.render(Object(f.jsxs)(i.a,{children:[Object(f.jsx)(oe,{})," "]}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.24cb2963.chunk.js.map